<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 360 480"><defs><path stroke="brown" fill="none" d="M-14-4h10v-10M-14 4h10v10M14-4H4v-10M14 4H4v10" id="x"/><path stroke="brown" fill="none" d="M14-4H4v-10M14 4H4v10" id="xr"/><path stroke="brown" fill="none" d="M-14-4h10v-10M-14 4h10v10" id="xl"/><g id="r"><circle r="19"/><text x="-14" y="9" fill="#fff" font-size="28">车</text></g><g id="n"><circle r="19"/><text x="-14" y="9" fill="#fff" font-size="28">马</text></g><g id="b"><circle r="19"/><text x="-14" y="9" fill="#fff" font-size="28">象</text></g><g id="a"><circle r="19"/><text x="-14" y="9" fill="#fff" font-size="28">士</text></g><g id="k"><circle r="19"/><text x="-14" y="9" fill="#fff" font-size="28">将</text></g><g id="c"><circle r="19"/><text x="-14" y="9" fill="#fff" font-size="28">炮</text></g><g id="p"><circle r="19"/><text x="-14" y="9" fill="#fff" font-size="28">卒</text></g><g id="R"><circle r="19" fill="red"/><text x="-14" y="9" fill="#fff" font-size="28">车</text></g><g id="N"><circle r="19" fill="red"/><text x="-14" y="9" fill="#fff" font-size="28">马</text></g><g id="B"><circle r="19" fill="red"/><text x="-14" y="9" fill="#fff" font-size="28">相</text></g><g id="A"><circle r="19" fill="red"/><text x="-14" y="9" fill="#fff" font-size="28">仕</text></g><g id="K"><circle r="19" fill="red"/><text x="-14" y="9" fill="#fff" font-size="28">帅</text></g><g id="C"><circle r="19" fill="red"/><text x="-14" y="9" fill="#fff" font-size="28">炮</text></g><g id="P"><circle r="19" fill="red"/><text x="-14" y="9" fill="#fff" font-size="28">兵</text></g></defs><g transform="translate(0 40)" id="qipan"><path stroke="brown" stroke-width="2" fill="none" d="M20 20h320v360H20zm0 40h320m0 40H20m0 40h320m0 40H20m0 40h320m0 40H20m0 40h320m0 40H20M60 20v160m40 0V20m40 0v160m40 0V20m40 0v160m40 0V20m40 0v160M60 220v160m40 0V220m40 0v160m40 0V220m40 0v160m40 0V220m40 0v160"/><path stroke="brown" fill="none" d="M140 20l80 80m-80 0l80-80m-80 280l80 80m-80 0l80-80"/><use xlink:href="#x" transform="translate(60 100)"/><use xlink:href="#x" transform="translate(300 100)"/><use xlink:href="#x" transform="translate(60 300)"/><use xlink:href="#x" transform="translate(300 300)"/><use xlink:href="#x" transform="translate(100 140)"/><use xlink:href="#x" transform="translate(180 140)"/><use xlink:href="#x" transform="translate(260 140)"/><use xlink:href="#x" transform="translate(100 260)"/><use xlink:href="#x" transform="translate(180 260)"/><use xlink:href="#x" transform="translate(260 260)"/><use xlink:href="#xr" transform="translate(20 140)"/><use xlink:href="#xr" transform="translate(20 260)"/><use xlink:href="#xl" transform="translate(340 140)"/><use xlink:href="#xl" transform="translate(340 260)"/><text x="125" y="206" font-size="24" font-family="arial,sans-serif">xqipu.com</text><g id="steps" transform="translate(10 405)"><text y="20" id="steps-text" font-size="14">0/0</text></g><g id="b-qj" transform="translate(70 402)" onclick="gotoNext()" cursor="pointer"><rect rx="10" ry="10" width="50" height="35" fill="#fff" stroke="#0275d8"/><text x="5" y="25" fill="#0275d8" font-size="20">前进</text></g><g id="b-ht" transform="translate(125 402)" onclick="gotoPrevious()" cursor="pointer"><rect rx="10" ry="10" width="50" height="35" fill="#fff" stroke="#0275d8"/><text x="5" y="25" fill="#0275d8" font-size="20">后退</text></g><g id="b-cs" transform="translate(180 402)" onclick="gotoInit()" cursor="pointer"><rect rx="10" ry="10" width="50" height="35" fill="#fff" stroke="#0275d8"/><text x="5" y="25" fill="#0275d8" font-size="20">初始</text></g><g id="b-zj" transform="translate(235 402)" onclick="gotoEnd()" cursor="pointer"><rect rx="10" ry="10" width="50" height="35" fill="#fff" stroke="#0275d8"/><text x="5" y="25" fill="#0275d8" font-size="20">终局</text></g><g id="b-zd" transform="translate(290 402)" onclick="autoPlay()" cursor="pointer"><rect rx="10" ry="10" width="50" height="35" fill="#fff" stroke="#0275d8"/><text x="5" y="25" fill="#0275d8" id="b-zd-t" font-size="20">自动</text></g></g><g id="title"><a xlink:href="https://www.xqipu.com" id="title-a" target="_blank" cursor="pointer"><text y="30" id="title-text" fill="#0275d8" font-size="20">棋谱</text></a></g><script type="text/javascript"><![CDATA[var fen="rnbakabnr/9/1c5c1/p1p1p1p1p/9/9/P1P1P1P1P/1C5C1/9/RNBAKABNR w",title="中炮巡河炮对屏风马",uuid="20d9f3ea-9556-4aa1-b668-a84d1d81fea5",moves="h2e2h9g7h0g2i9h9c3c4g6g5b0c2b9c7b2b4a9a8i0h0g9e7a0a1a8d8g3g4g5g4b4g4d8d5a1b1b7b5h0h6g7f5g4g5e7g5g2f4g5e7h6h7h9h7f4d5";var current_step=0,total_steps=0,interval=0,fen_list=[],auto_play=!1,svgns="http://www.w3.org/2000/svg",xlinkns="http://www.w3.org/1999/xlink",qizis=[],g=document.getElementById("qipan"),zd_t=document.getElementById("b-zd-t"),steps_text=document.getElementById("steps-text"),title_text=document.getElementById("title-text");function fenDrawing(t){for(var e=0;e<qizis.length;e++){var n=qizis[e],r=document.getElementById(n);g.removeChild(r)}qizis=[];var a;a=t.split("/");for(e=0;e<10;e++){var s=a[e]||"",o=0;if(""!=s&&"9"!=s)for(var i=0;i<s.length&&!(8<o);i++){var l=s.charAt(i);if(/^\d+$/.test(l))o=parseInt(l)+o;else{var u=l,p=document.createElementNS(svgns,"use");p.setAttributeNS(xlinkns,"href","#"+u);n="qizi_"+o+"_"+e;p.setAttribute("transform","translate("+(40*o+20)+","+(40*e+20)+") scale(1)"),p.setAttribute("id",n),qizis.push(n),g.appendChild(p),o++}}}}function getFenList(t,e){var n=[];n[0]=t;for(var r=Math.floor(e.length/4),a=t,s=1;s<=r;s++){var o=e.substring(4*(s-1),4*s);n[s]=nextFen(a,o),a=n[s]}return n}function nextFen(t,e){var n=[];n.a="0",n.b="1",n.c="2",n.d="3",n.e="4",n.f="5",n.g="6",n.h="7",n.i="8",""==t&&(t="rnbakabnr/9/1c5c1/p1p1p1p1p/9/9/P1P1P1P1P/1C5C1/9/RNBAKABNR w");var r=t.split(" "),a=r[0],s=r[1]||"w",o=[];o=a.split("/");var i=e.charAt(0),l=e.charAt(1),u=o[9-l],p=e.charAt(2),f=e.charAt(3),c=o[9-f];if(l==f){var v=(_=fenItemToRowArray(u))[g=n[i]];_[g]="",_[n[p]]=v,o[9-l]=rowArrayToFenItem(_)}else{var _,g;v=(_=fenItemToRowArray(u))[g=n[i]];_[g]="",o[9-l]=rowArrayToFenItem(_);var x=fenItemToRowArray(c);x[n[p]]=v,o[9-f]=rowArrayToFenItem(x)}return(a=o.join("/"))+" "+(s="w"==s?"b":"w")}function fenItemToRowArray(t){for(var e=[],n=0,r=0;r<t.length&&!(8<n);r++){var a=t.charAt(r);if(/^\d+$/.test(a))for(var s=0;s<a&&(e[n]="",s++,!(8<++n)););else e[n]=a,n++}return e}function rowArrayToFenItem(t){for(var e="",n=0,r=0;r<t.length;r++)""!=t[r]?0==n?e+=t[r]:(e=e+n+t[r],n=0):n++;return 0<n&&(e+=n),e}function gotoNext(){var t=current_step+1;t<=total_steps&&fenDrawing(fen_list[current_step=t]),setStepText()}function gotoPrevious(){var t=current_step-1;0<=t&&fenDrawing(fen_list[current_step=t]),setStepText()}function gotoInit(){fenDrawing(fen_list[current_step=0]),setStepText()}function gotoEnd(){fenDrawing(fen_list[current_step=total_steps]),setStepText()}function autoMove(){gotoNext(),current_step==total_steps&&(clearInterval(interval),zd_t.textContent="自动",auto_play=!1)}function autoPlay(){0==auto_play?(auto_play=!0,zd_t.textContent="暂停",current_step==total_steps&&(current_step=0),interval=setInterval(autoMove,2e3)):(clearInterval(interval),zd_t.textContent="自动",auto_play=!1)}function setStepText(){var t=current_step+"/"+total_steps,e=0;t.length<6&&(e=10),steps_text.setAttribute("x",e),steps_text.textContent=t}function setTitleText(){title=title.replace(/\s/g,"");var t=0;t=16<title.length?20:180-10*title.length,title_text.setAttribute("x",t),document.getElementById("title-a").setAttributeNS(xlinkns,"href","https://www.xqipu.com/qipu/"+uuid),title_text.textContent=title}setTitleText(),fenDrawing(fen),fen_list=getFenList(fen,moves),total_steps=Math.floor(moves.length/4),setStepText(),autoPlay();]]></script></svg> 